import{a as T,T as w}from"./router.D37drDj1.js";const p="div.main-frame",q=`${p} main`,M="data-mobile-menu-expanded",N="starlight-menu-button",u="nav.sidebar",c=`${u} .sidebar-content`,E="starlight-lang-select";function R(e){const t=s(e.href),r=t.split(""),n=document.querySelectorAll(`${c} a[href^='/']`);if(n.length===0)return null;const a=[...n],l=a.map(o=>s(new URL(o.href,location.href).href));return a[l.map(o=>o.split("").findIndex((i,m)=>i!==r[m])).map((o,i)=>o!==-1?o:Math.min(t.length,l[i].length)+(t.length===l[i].length?1:0)).reduce((o,i,m,v)=>i>v[o]?m:o,0)];function s(o){return o.replace(/\/#/,"#").replace(/\/$/,"")}}function _(){document.querySelectorAll(`${c} [aria-current="page"]`)?.forEach(e=>e.removeAttribute("aria-current"))}function C(e){_(),R(e)?.setAttribute("aria-current","page")}function h(e,t=!0){const r=document.querySelector(`${c} [aria-current="page"]`);let n=r?.closest("details");for(;n;)n.open=!0,n=n.parentElement?.closest("details");t&&r?.scrollIntoView({block:"center",behavior:"instant"})}function y(e){e.querySelectorAll(c+" .__collapse input").forEach((t,r)=>t.setAttribute("data-vtbot-replace",`vtbot-sms-v0-${r}`)),e.querySelectorAll(c+" :is(starlight-multi-sidebar-tabs, starlight-multi-sidebar-select)").forEach((t,r)=>{t.setAttribute("data-vtbot-replace",`vtbot-sms-${r}`),[...t.children].forEach((n,a)=>{a>0&&[...n.children].forEach((l,s)=>l.setAttribute("data-astro-transition-persist",`vtbot-sms-${r}-${a}-${s}`))})})}const I="vtbot-starlight-replace-sidebar-content",$="vtbot-starlight-retain-current-page-marker",A=()=>({replaceSidebarContent:document.querySelector(`head meta[name="${I}"]`),retainCurrentPageMarker:document.querySelector(`head meta[name="${$}"]`),mainTransitionScope:document.querySelector('head meta[name="vtbot-main-transition-scope"]')?.content});let{replaceSidebarContent:f,retainCurrentPageMarker:b,mainTransitionScope:d}=A();h();g(window.document);y(window.document);function k(e){S(document),S(e.newDocument),O(),g(e.newDocument),y(e.newDocument),D(e),!f&&!b&&C(e.to)}function L(e){P(e),!b&&h()}function O(){document.body.hasAttribute(M)&&document.body.querySelector(N)?.closest("nav")?.dispatchEvent(new KeyboardEvent("keyup",{key:"Escape",code:"Escape",charCode:27,keyCode:27,shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1}))}function S(e){e.body.querySelector(p)?.setAttribute("data-vtbot-replace","main")}function D(e){if(!d)return;t(document,d),t(e.newDocument,d);function t(r,n){const a=r.querySelector(q);a&&(a.dataset.astroTransitionScope=n)}}function P(e){const t=e.newDocument.querySelector(u);if(!t)document.querySelector(u)?.remove();else{const r=document.querySelector(u);if(!r)document.querySelector(p)?.insertAdjacentElement("beforebegin",t);else if(f){const n=r.querySelector(c),a=t.querySelector(c);n&&a?n.replaceWith(a):r.replaceWith(t)}}}function g(e){e.querySelectorAll(E).forEach((t,r)=>t.setAttribute("data-vtbot-replace",`vtbot-${E}-${r}`))}document.addEventListener(T,e=>{({replaceSidebarContent:f,retainCurrentPageMarker:b,mainTransitionScope:d}=A());const t=e.loader;e.loader=async()=>{await t(),k(e)}});document.addEventListener(w,e=>{const t=e.swap;e.swap=()=>{t(),L(e)}});export{I as REPLACE_SIDEBAR_CONTENT,$ as RETAIN_CURRENT_PAGE_MARKER};
