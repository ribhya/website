import{a as T,i as w,T as N,b as R}from"./router._5J3zBRp.js";const m="div.main-frame",v=`${m} main`,M="data-mobile-menu-expanded",q="starlight-menu-button",s="nav.sidebar",i=`${s} .sidebar-content`,S="starlight-lang-select";function C(e){const t=E(e.href),n=t.split(""),r=document.querySelectorAll(`${i} a`);if(r.length===0)return null;const o=[...r],u=o.map(a=>E(new URL(a.href,location.href).href));return o[u.map(a=>a.split("").findIndex((c,d)=>c!==n[d])).map((a,c)=>a!==-1?a:Math.min(t.length,u[c].length)+(t.length===u[c].length?1:0)).reduce((a,c,d,g)=>c>g[a]?d:a,0)];function E(a){return a.replace(/\/#/,"#").replace(/\/$/,"")}}function _(){document.querySelectorAll(`${i} [aria-current="page"]`)?.forEach(e=>e.removeAttribute("aria-current"))}function I(e){_(),C(e)?.setAttribute("aria-current","page")}function b(e,t=!0){const n=document.querySelector(`${i} [aria-current="page"]`);let r=n?.closest("details");for(;r;)r.open=!0,r=r.parentElement?.closest("details");t&&n?.scrollIntoView({block:"center",behavior:"instant"})}const k="vtbot-starlight-replace-sidebar-content",L="vtbot-starlight-retain-current-page-marker",h=()=>({replaceSidebarContent:document.querySelector(`head meta[name="${k}"]`),retainCurrentPageMarker:document.querySelector(`head meta[name="${L}"]`),mainTransitionScope:document.querySelector('head meta[name="vtbot-main-transition-scope"]')?.content});let{replaceSidebarContent:p,retainCurrentPageMarker:f,mainTransitionScope:l}=h();b();A(window.document);function O(e){y(document),y(e.newDocument),$(),A(e.newDocument),B(e),!p&&!f&&I(e.to)}function P(e){D(e),!f&&b()}function $(){document.body.hasAttribute(M)&&document.body.querySelector(q)?.closest("nav")?.dispatchEvent(new KeyboardEvent("keyup",{key:"Escape",code:"Escape",charCode:27,keyCode:27,shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1}))}function y(e){e.body.querySelector(m)?.setAttribute("data-vtbot-replace","main")}function B(e){if(!l)return;t(document,l),t(e.newDocument,l);function t(n,r){const o=n.querySelector(v);o&&(o.dataset.astroTransitionScope=r)}}function D(e){const t=e.newDocument.querySelector(s);if(!t)document.querySelector(s)?.remove();else{const n=document.querySelector(s);if(!n)document.querySelector(m)?.insertAdjacentElement("beforebegin",t);else if(p){const r=n.querySelector(i),o=t.querySelector(i);r&&o?r.replaceWith(o):n.replaceWith(t)}}}function A(e){e.querySelectorAll(S).forEach((t,n)=>t.setAttribute("data-vtbot-replace",`vtbot-${S}-${n}`))}document.addEventListener(T,e=>{if({replaceSidebarContent:p,retainCurrentPageMarker:f,mainTransitionScope:l}=h(),w(e)){const t=e.loader;e.loader=async()=>{await t(),O(e)}}});document.addEventListener(N,e=>{if(R(e)){const t=e.swap;e.swap=()=>{t(),P(e)}}});export{k as REPLACE_SIDEBAR_CONTENT,L as RETAIN_CURRENT_PAGE_MARKER};
